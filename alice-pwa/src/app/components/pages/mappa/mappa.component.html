<style>
    #popup {
        position:absolute; 
        left: -75px;
        top: -160px;
    }

</style>
<div class="fulldiv" id="olmap" (click)="clickMappa($event)">
</div>
<svg id="popup" viewBox="-20 0 100 100" height="140" width="240" >
      <g id="popup-back" (click)="clickGioca(location)" *ngIf="false">
         <path id="path2410" d="M 99.870134,37.428264 C 99.2982,45.21833 93.695683,49.255607 86.366611,48.931264 80.518218,48.672449 74.787005,45.870426 73.709463,40.352103 72.434324,33.821846 81.118614,25.702685 88.828792,26.386922 c 7.540038,0.669137 11.446688,5.520351 11.041342,11.041342 z" style="opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.37556869;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" />
         <path style="opacity:1;vector-effect:none;fill:#d20258;fill-opacity:1;stroke:none;stroke-width:0.37556869;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" d="M 98.715987,35.889401 C 98.21292,43.684216 92.548664,47.366361 85.212464,47.392402 79.13466,47.413977 72.983433,45.125303 72.555316,38.81324 72.105069,32.174902 79.978443,24.021332 87.674645,24.848059 95.1804,25.654328 99.055241,30.632756 98.715987,35.889401 Z" id="path2405" />
         <path style="fill:#000000;stroke:none;stroke-width:0.30777261px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 83.1632,44.354187 c 1.341217,0.327538 2.902529,0.361618 4.679002,0.108813 -1.137457,-1.667567 -1.43202,-2.808326 -1.414581,-3.754083 4.421981,1.375186 6.219825,-0.309016 6.474433,-2.665945 -0.141458,-3.174607 -1.554611,-3.949754 -3.871406,-6.731252 -1.497896,-1.798346 -1.795053,-2.440541 -2.711843,-3.823711 -2.300801,4.015995 -7.306987,6.21018 -7.83461,9.68445 -0.310986,3.926492 3.641266,5.1741 6.474436,3.427641 -0.272338,2.229785 -1.121492,2.729112 -1.795431,3.754087 z" id="path2412" />
      </g>
      <a *ngIf="location" target="_blank" [attr.href]="findWayHref(location)">
         <g id="popup-go">
            <path style="opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.37930176;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" d="M 69.831014,14.285906 C 70.337909,21.953119 64.161904,26.14199 56.812064,26.581089 50.284425,26.971068 44.987308,24.057779 43.749133,18.434795 42.295089,11.831472 50.522057,3.2173664 58.27768,3.5652756 65.862163,3.905509 69.459625,8.6683208 69.831014,14.285906 Z" id="path2429" />
            <path id="path2431" d="m 68.713787,10.575067 c 1.042087,7.829948 -3.55513,13.015778 -10.742488,14.014321 -6.020023,0.836366 -12.66684,0.10905 -14.329822,-5.995041 -1.748942,-6.419613 4.364237,-15.9642323 12.07251,-16.6695793 7.517527,-0.6878903 12.304865,3.4287591 12.9998,8.6502993 z" style="opacity:1;vector-effect:none;fill:#d20258;fill-opacity:1;stroke:none;stroke-width:0.37556869;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" />
            <path style="fill:#000000;stroke:none;stroke-width:0.30777261px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 60.649566,6.2674914 c -1.329223,-0.012588 -2.159018,1.451988 -2.733285,4.8822826 -0.125128,0.341874 -0.561845,3.371101 0.561445,3.388503 l 4.54806,0.150882 c 0.344336,-0.05048 0.902051,-0.372565 0.909493,-1.145733 C 64.239004,12.963238 63.797859,8.7157885 63.20973,7.6632863 62.511871,6.7704995 61.669987,6.2743485 60.649566,6.2674914 Z m -7.067951,1.6675027 c -0.600745,0.021175 -1.201409,0.2308294 -1.802153,0.6059242 -0.912725,0.7877809 -2.78051,4.6287307 -2.693611,5.2778197 -0.257525,0.729055 0.15658,1.222138 0.462863,1.387384 l 4.325045,1.41443 c 1.061458,0.367949 1.687354,-2.628316 1.686738,-2.992368 C 56.194472,10.208421 55.91635,8.5486342 54.663026,8.1057094 54.302581,7.9772112 53.942063,7.9222923 53.581615,7.9349941 Z m 5.143169,7.7784689 c -0.344333,0.05049 -0.703679,0.0684 -0.711121,0.841568 -0.08862,0.791203 0.0094,1.495291 0.198969,2.156811 0.697859,0.892787 1.539743,1.388332 2.560164,1.395195 0.859608,-0.269393 1.829911,-0.516353 2.729678,-2.24818 0.126184,-0.321733 0.697234,-1.847771 -0.273508,-1.952433 z m -9.950312,0.544013 c -0.779471,-0.01234 -0.765973,1.439785 -0.758011,1.763682 0.252974,1.935148 1.079371,2.49984 1.79494,3.047068 0.961189,0.342665 1.922375,0.164948 2.883564,-0.435208 0.404447,-0.556746 0.737706,-1.18527 0.925121,-1.959047 0.257526,-0.729055 -0.07422,-0.868679 -0.380508,-1.033922 l -4.298595,-1.35973 c -0.05925,-0.01462 -0.114547,-0.02201 -0.166511,-0.02284 z" id="path2433" />
         </g>
      </a>
      <g id="popup-play" (click)="clickGioca(location)">
         <path id="path2403" d="m 69.160199,26.814916 c -2.361641,-0.11113 -5.857747,3.513311 -8.075424,6.536564 -5.766304,-3.702877 -13.451127,-5.988645 -22.713858,-5.90659 -0.349417,0.0031 -0.70113,0.0096 -1.055564,0.01924 -8.17757,0.221907 -15.715091,2.315921 -21.742451,5.741882 C 12.998824,31.3747 9.9859308,27.349487 7.7920261,27.419043 7.4705823,27.429231 7.166583,27.527244 6.884337,27.733427 5.1758298,28.542995 6.3072911,38.510568 7.3147385,39.785248 3.6616255,43.91836 1.5367881,48.857836 1.5367881,54.240341 c 0,9.324768 2.0609931,16.024923 7.3282349,20.393542 1.169844,1.413618 -4.8199528,17.678394 -5.3827828,22.478828 -0.078553,0.669984 0.559032,1.202716 1.2861602,1.754657 1.1117116,0.843867 14.5533656,-18.542169 16.2794866,-19.014575 4.476759,0.884686 9.701042,2.102437 16.11358,2.010139 C 59.094413,81.547244 73.785458,72.638935 73.555577,54.93283 73.498589,50.543451 71.75435,45.604729 69.30026,41.751509 69.878306,36.909488 72.691523,27.778026 69.160199,26.814916 Z" style="opacity:1;vector-effect:none;fill:#000000;fill-opacity:1;stroke:none;stroke-width:0.31570539;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" />
         <path style="opacity:1;vector-effect:none;fill:#d20258;fill-opacity:1;stroke:none;stroke-width:0.31570539;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" d="m 67.929109,25.583826 c -2.361638,-0.11113 -5.857747,3.51331 -8.075424,6.536564 -5.766304,-3.702877 -13.451128,-5.988646 -22.713858,-5.90659 -0.349417,0.0031 -0.701131,0.0096 -1.055565,0.01924 -8.17757,0.221908 -15.71509,2.315922 -21.74245,5.741883 -2.574078,-1.831309 -5.5869716,-5.856522 -7.7808763,-5.786965 -0.3214438,0.01019 -0.6254431,0.1082 -0.9076891,0.314383 -1.7085072,0.809569 -0.5770459,10.777141 0.4304015,12.051821 -3.653113,4.133113 -5.7779504,9.072589 -5.7779504,14.455094 0,9.324769 2.0609931,16.024924 7.3282349,20.393542 1.333117,1.610912 -5.007688,23.182213 -4.0966226,24.233485 0.9140723,1.054743 14.553366,-18.542169 16.279487,-19.014576 4.476759,0.884685 9.855017,1.262089 16.267465,1.163765 21.91665,-0.336057 35.282704,-9.977293 35.778565,-26.776216 0.12952,-4.387838 -1.108735,-8.712555 -3.562828,-12.565776 0.57805,-4.84202 3.160437,-13.896539 -0.37089,-14.859649 z" id="path2391" />
         <path style="fill:#000000;stroke:none;stroke-width:0.30777261px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="m 3.6740564,53.765027 c 4.5188035,7.800054 7.9704826,10.457478 12.6701056,13.120661 5.947988,3.370609 17.810406,2.218533 19.189027,-2.697199 1.92859,4.183647 8.014384,5.288738 18.622797,0.273514 5.888635,-2.783906 9.958478,-6.570104 13.062817,-14.46701 C 63.817221,62.874023 55.420787,72.661426 35.66647,73.792781 13.256513,74.862619 5.4976214,59.951924 3.6740564,53.765027 Z" id="path2457" />
         <path style="fill:#000000;stroke:none;stroke-width:0.30777261px;stroke-linecap:butt;stroke-linejoin:miter;stroke-opacity:1" d="M 39.359375 60.548828 C 39.321808 60.539446 39.278809 60.54513 39.236328 60.574219 L 37.583984 61.734375 C 37.450746 61.824191 37.52576 62.032585 37.685547 62.015625 C 37.711207 62.012765 37.736672 62.005044 37.757812 61.990234 L 39.410156 60.828125 C 39.537881 60.741273 39.472076 60.576974 39.359375 60.548828 z M 31.306641 60.898438 A 0.15414405 0.15414405 0 0 0 31.251953 61.189453 L 33.238281 62.236328 A 0.15420706 0.15420706 0 0 0 33.328125 62.253906 A 0.15420706 0.15420706 0 0 0 33.371094 62.242188 A 0.15420706 0.15420706 0 0 0 33.380859 61.964844 L 31.396484 60.916016 A 0.15414405 0.15414405 0 0 0 31.322266 60.898438 A 0.15414405 0.15414405 0 0 0 31.306641 60.898438 z M 35.427734 62.136719 C 34.835515 62.154612 34.2432 62.230765 33.675781 62.355469 C 34.159689 63.283628 34.809016 63.993969 35.4375 64.126953 C 36.421363 63.637232 36.905069 62.825365 37.177734 62.269531 C 36.610383 62.159136 36.019954 62.118826 35.427734 62.136719 z M 38.134766 62.470703 C 37.975234 62.45149 37.895383 62.65832 38.027344 62.75 C 38.048624 62.76462 38.073939 62.772791 38.099609 62.775391 L 40.099609 62.988281 C 40.304169 63.012079 40.339407 62.704771 40.134766 62.681641 L 38.134766 62.470703 z M 33.066406 62.585938 L 31.074219 63.128906 C 31.049349 63.135806 31.026342 63.148046 31.007812 63.166016 C 30.893082 63.278513 31.003974 63.469497 31.158203 63.423828 L 33.152344 62.880859 C 33.350155 62.823729 33.264055 62.528261 33.066406 62.585938 z M 33.464844 63.402344 C 33.426672 63.39574 33.385953 63.405327 33.345703 63.4375 L 31.859375 64.669922 C 31.838965 64.685742 31.82282 64.706799 31.8125 64.730469 C 31.74906 64.878099 31.925591 65.012841 32.050781 64.912109 L 33.537109 63.677734 C 33.658324 63.581806 33.579358 63.422156 33.464844 63.402344 z M 37.699219 63.488281 C 37.601601 63.50757 37.533609 63.623778 37.599609 63.724609 C 37.613869 63.746139 37.63344 63.765304 37.65625 63.777344 L 39.429688 64.722656 C 39.610439 64.821355 39.7592 64.549282 39.578125 64.451172 L 37.802734 63.505859 C 37.767554 63.486465 37.731758 63.481852 37.699219 63.488281 z " id="path2459" />
         <path style="opacity:1;vector-effect:none;fill:#ffffff;fill-opacity:1;stroke:none;stroke-width:0.30825725;stroke-linecap:round;stroke-linejoin:miter;stroke-miterlimit:4;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:markers fill stroke" d="m 62.982197,57.68612 c -0.604663,0.770103 -1.239208,1.47458 -1.906147,2.124954 0.141214,0.0833 0.312084,0.136575 0.522372,0.149077 0.858803,0.05106 1.160917,-0.347586 1.287596,-1.282786 0.04083,-0.301421 0.103416,-0.619036 0.09618,-0.991245 z m -2.030578,2.246981 c -0.84054,0.806223 -1.732431,1.528206 -2.681589,2.186267 0.21605,0.239839 0.511195,0.39082 0.918509,0.417177 1.100693,0.07122 1.586291,-1.021155 1.748653,-2.325727 0.01,-0.08007 0.01047,-0.182554 0.01442,-0.277717 z m 2.005932,0.169515 c -1.022606,0.16745 -1.378966,0.806241 -1.378966,1.930191 0,0.015 -0.0016,0.04013 -0.0018,0.0559 0.488851,-0.642102 0.949115,-1.30439 1.380768,-1.986095 z m -4.989283,2.216925 c -1.11353,0.747314 -2.304494,1.413864 -3.582065,2.028774 0.227339,0.50237 0.65598,0.727354 1.378366,0.727354 1.188845,0 2.210312,-0.87803 2.210312,-2.344963 0,-0.117609 -0.0033,-0.266412 -0.0066,-0.411165 z m -47.757651,0.184543 c -0.0055,0.32155 0.03637,0.601463 0.06793,0.862004 0.09803,0.809403 0.331484,1.154457 0.996054,1.110265 0.287438,-0.01911 0.48308,-0.143439 0.616748,-0.33903 0.178176,1.24444 0.638924,2.330547 1.69816,2.262008 0.793478,-0.05134 0.862059,-0.06565 0.997254,-0.55363 -1.54158,-0.958827 -2.967558,-2.003755 -4.376141,-3.341617 z m 50.356286,0.605326 c -1.533391,0.08161 -2.046808,0.847974 -2.046808,2.314907 0,0.01071 -0.0017,0.02982 -0.0018,0.04088 0.800228,-0.741554 1.540031,-1.525968 2.230149,-2.345564 -0.05999,-0.0059 -0.119598,-0.01351 -0.181537,-0.01022 z m -6.366444,1.330275 c -0.01514,0.0072 -0.02933,0.01508 -0.04448,0.02224 -1.544806,0.730321 -2.990759,1.327417 -4.344885,1.807563 0.349747,0.836658 1.083369,1.364539 1.933197,1.364539 1.188846,0 2.441141,-1.301217 2.441141,-2.76815 0,-0.128353 0.0075,-0.276103 0.01502,-0.426193 z m -19.487056,1.229889 c -0.882233,1.032399 -2.316955,1.81837 -4.045526,2.345563 0.139199,1.24344 1.005385,2.090089 2.055825,2.090089 1.147352,0 2.077465,-1.008755 2.077465,-2.442945 0,-0.724683 0.161375,-1.485892 -0.08776,-1.992707 z m -23.405746,0.05109 c -0.06644,-0.0035 -0.130899,0.0016 -0.194762,0.01022 0.597978,0.570884 1.238748,1.128716 1.921175,1.669305 -0.06919,-1.054202 -0.529707,-1.615836 -1.726413,-1.679525 z m 25.29326,0.04268 c -0.02552,0.429385 0.04328,0.926206 0.04328,1.409021 0,1.434191 0.930113,2.442945 2.077465,2.442945 1.002698,0 1.839726,-0.770254 2.034786,-1.921775 -1.803147,-0.239664 -3.184732,-0.913466 -4.155531,-1.930191 z m -21.86989,0.170717 c 0.09,1.36938 1.042499,2.460378 2.173644,2.460378 0.672187,0 0.980757,-0.249822 1.122289,-0.731561 -0.598014,-0.225706 -1.163651,-0.483207 -1.682531,-0.777246 -0.55432,-0.314122 -1.090007,-0.62916 -1.613402,-0.951571 z m 41.836636,0.0048 c -1.533393,0.08161 -2.046206,0.847973 -2.046206,2.314907 0,0.07354 -0.0069,0.179466 -0.01022,0.267497 1.096893,-0.684467 2.116404,-1.425568 3.061497,-2.21993 -0.292063,-0.224442 -0.630958,-0.382385 -1.00507,-0.362474 z m -6.893625,0.379906 c -1.587405,0.556013 -3.042526,0.944185 -4.36893,1.1824 0.02225,0.141086 0.04644,0.273697 0.07394,0.384716 0.13465,0.543615 1.463889,1.460117 2.40267,1.460117 0.554064,0 1.883303,-1.147331 1.883303,-2.614264 0,-0.130263 0.005,-0.274244 0.009,-0.412969 z m -35.740093,0.898071 c -0.27851,-0.01566 -0.526648,0.121769 -0.736971,0.307773 0.766846,0.598282 1.581961,1.175382 2.459774,1.717996 -0.04499,-1.01972 -0.709914,-1.968814 -1.722803,-2.025769 z m 31.303237,0.296352 c -1.596592,0.28143 -3.006963,0.34594 -4.228866,0.213998 0.214825,1.155408 1.072076,1.926584 2.099104,1.926584 1.089088,0 1.986436,-0.867426 2.129762,-2.140582 z m -26.88562,0.267497 c 0.194362,1.130428 1.150048,2.057027 2.06424,2.057027 0.726891,0 1.350805,-0.468985 1.654278,-1.207045 -1.305667,-0.165589 -2.568633,-0.447293 -3.718518,-0.849982 z m 12.203907,0.269301 c -1.304048,0.386403 -2.766109,0.628317 -4.277559,0.718938 0.182217,1.211174 1.057596,2.027572 2.114133,2.027572 1.188846,0 2.152605,-1.031916 2.152605,-2.498849 0,-0.08228 0.0075,-0.164843 0.01083,-0.247661 z m 20.95258,0.364278 c -1.533391,0.08161 -1.910354,0.630369 -1.910354,2.097302 0,0.130326 -0.0089,0.300267 -0.01684,0.471277 1.308554,-0.514985 2.533147,-1.092123 3.678246,-1.727614 -0.404112,-0.432232 -1.057094,-0.877899 -1.75106,-0.840965 z M 16.536787,68.57777 c -0.451499,-0.02403 -0.670535,0.306465 -0.813914,0.705112 0.892642,0.548369 1.843801,1.063567 2.857115,1.535857 -0.01816,-1.416169 -0.53719,-2.160817 -2.043201,-2.240969 z m 5.663736,0.06973 c 0.341403,1.108197 1.32594,1.895326 1.785321,1.895326 0.950174,0 1.941784,-0.663751 2.078069,-1.219068 0.0344,-0.14018 0.07786,-0.352131 0.119622,-0.54822 -1.317987,0.07344 -2.669777,0.03035 -3.983012,-0.128038 z m -1.664496,1.398803 c -0.7037,-0.03745 -1.364783,0.42169 -1.767288,0.859599 1.333738,0.610009 2.773625,1.145841 4.326851,1.587553 -0.17711,-1.291841 -1.171967,-2.373301 -2.559563,-2.447152 z m 26.619323,0.136453 c -1.533391,0.08161 -2.372613,0.739172 -2.372613,2.206105 0,0.02627 -0.0031,0.0703 -0.0036,0.09858 1.529571,-0.372305 2.966413,-0.814164 4.315427,-1.321258 -0.465309,-0.480357 -1.241884,-1.020543 -1.939208,-0.98343 z m -5.467771,0.326408 c -1.533391,0.08161 -2.427316,1.283183 -2.427316,2.750116 0,0.06957 -0.004,0.146163 -0.006,0.218807 1.78153,-0.213208 3.457133,-0.506362 5.037973,-0.87102 C 44.18209,72.343534 44.071382,72.10217 43.981457,71.941629 43.707767,71.453016 42.625044,70.45927 41.68759,70.509164 Z m -5.821832,0.135852 c -1.533391,0.08161 -2.427317,1.283184 -2.427317,2.750117 0,0.143341 -0.0063,0.297078 -0.01203,0.450839 0.730339,-3.03e-4 1.475715,-0.01702 2.239769,-0.0535 1.064703,-0.06098 2.090035,-0.151692 3.089748,-0.262088 -0.171143,-0.571398 -0.422415,-1.141849 -0.59631,-1.452302 -0.273689,-0.488612 -1.356415,-1.482959 -2.293869,-1.433066 z M 25.10633,70.944388 c -0.937453,-0.04989 -1.449116,1.080307 -1.722806,1.568919 -0.0069,0.01224 -0.02305,0.03646 -0.03126,0.05049 1.350937,0.372183 2.786151,0.673142 4.31122,0.889655 -0.06053,-1.399364 -1.070621,-2.429951 -2.557157,-2.509068 z m 5.467771,0.380508 c -0.937453,-0.04989 -2.020176,0.944454 -2.293866,1.433067 -0.09892,0.176609 -0.223532,0.438767 -0.34444,0.735768 1.587146,0.213271 3.272703,0.332788 5.056608,0.34925 -0.08965,-1.359513 -0.966757,-2.44083 -2.418302,-2.518085 z" id="path2503" />
      </g>

</svg>

<div class="fullpage panel narrative" *ngIf="showdisclaimer">
   <div>Questa mappa mostra i luoghi che puoi raggiungere per giocare le tappe del gioco.</div>
   <div>Se nella mappa vuoi vedere anche la tua posizione in tempo reale, che il gioco possa utilizzare il GPS del tuo dispositivo.</div>
   <div>
      Sappi che teniamo alla tua privacy e al rispetto dei tuoi dati personali.
      I dati della tua posizione e dei tuoi spostamenti <strong>non</strong> sono registrati dalla app e <strong>non</strong> sono trasmessi a nessun server: 
      tutti i dati sono trattati come tuoi dati riservati e restano solo sul tuo dispositivo e solo per il fine del gioco.
   </div>
   <div *ngIf="gpsIsNeeded">
      Nota che alcune tappe del gioco richiedono che il tuo dispositivo sia rilevato nei pressi della tappa per poterla giocare. 
      Se non acconsenti all'utilizzo del GPS queste tappe non saranno accessibili.
   </div>
   <div class="button" (click)="clickAllowNavigation(true)">Ok, grazie, utilizza il GPS del mio dispositivo e mostrami le tappe del gioco che richiedono la mia presenza!</div>
   <div class="button" (click)="clickAllowNavigation(false)">No grazie, non utilizzare il GPS del mio dispositivo e nascondi le tappe del gioco che richiedono la mia presenza!</div>
</div>